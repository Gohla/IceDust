module rewrite

model

	entity Project{}
	entity Tag{}
	entity User{}
	entity Issue{}
	entity IssueGhost{}

rules

  createIssue (title:String,description:String,p:Project,t:Tag?,u:User?)
      p.
    ->
      ig:IssueGhost{title=title,description=description,alive=true}.
      ig project p.
    ?[t. -> ig tag t.]
    ?[
        u.
      ->
        i:Issue{title=title,description=description}.
        i project p.
        i reporter u.
      ?[t. -> i tag t.]
    ]

execute

	"aa"