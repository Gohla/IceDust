module generate-expressions-shortcuts

language Relations

setup Common [[
	module ExpressionsShortcuts
	
	model
	entity Node{
		value : Int ? = avg( this.children.value ) (default)
	}
	relation Tree{
		Node * parent <- parent
		Node 1 child  <- child
		
		child.parent <-> parent.children
	}
	
	data
	Node n1{
		value = 2
	}
	Node n2{
		value = 4
	}
	Node n3{}
	Tree t1{
		parent:n3
		child:n1
	}
	Tree t2{
		parent:n3
		child:n2
	}
	
	execute
	n3.value
]]

test Expressions Aggregation Recursive generate-java [[ ]] build generate-java-test

test Expressions Aggregation Recursive compile-java [[ ]] build compile-java-test

test Expressions Aggregation Recursive execute-java [[ ]] build execute-java-test to "3"
