module names-rules-modelrefs

language Relations

setup Common [[
	module test


]]

test Resolve Entity in rule parameter  [[
	model
		entity [[A]]{}
	
	rules
		someRule(a:[[A]])
			->
]] resolve #2 to #1

test Error on not existing Entity in rule parameter  [[
	model
	
	rules
		someRule(a:[[A]])
			->
]] 1 error

test Resolve Entity in rule body  [[
	model
		entity [[A]]{}
	
	rules
		someRule()
			->
				a:[[A]].
]] resolve #2 to #1

test Error on nonexisting Entity in rule body  [[
	model
	
	rules
		someRule()
			->
				a:[[A]].
]] 1 error

test Resolve Attribute in rule [[
	model
		entity A{[[a]]:Int}
	
	rules
		someRule()
			->
				A{[[a]]=3}.
]] resolve #2 to #1

test Error on nonexisting Attribute in rule [[
	model
		entity A{}
	
	rules
		someRule()
				A{[[a]]=x}.
			->

]] 1 error

test Resolve Role in rule [[
	model
		entity A{}
		relation B{A * [[as]]}
	
	rules
		someRule()
				b:B asdf:[[as]] a.
			->
]] resolve #2 to #1

test Resolve Inverse in rule [[
	model
		entity A{}
		relation B{A * as <- [[bx]]}
	
	rules
		someRule()
				a:A asdf:[[bx]] b.
			->
]] resolve #2 to #1

test Resolve Shortcut in rule [[
	model
		entity A{}
		relation B{A * [[C]] *}
		entity C{}
	
	rules
		someRule()
				a:A asdf:[[c]] c.
			->
]] resolve #2 to #1

test (TS/1) Error on nonexisting Role Inverse or Shortcut in rule [[
	model
		entity A{}
		entity C{}
	
	rules
		someRule()
				a:A [[c]] c.
			->
]] 1 error // http://yellowgrass.org/issue/TS/1


