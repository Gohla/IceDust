module names-shortcuts

language Relations

setup Common [[
	module inverses

	model
	
		entity Course{}
]]

test Resolve shortcut [[
	entity Student{
		numCourses : Int = count(this.[[courses]])
	}
	
	relation Enrollment{
		Student *
		Course  +
		
		student.[[courses]] Student <-> Course course.students
	}
]] resolve #1 to #2

test Resolve invalid shortcut fails [[
	entity Student{
		numCourses : Int = count(this.[[iDoNotExist]])
	}
	
	relation Enrollment{
		Student *
		Course  +
		
		student.courses Student <-> Course course.students
	}
]] 1 error



test Resolve role in shortcut [[
	entity Student{
	}
	
	relation Enrollment{
		Student * [[student]]
		Course  +
		
		student.abc Student <-> Course [[student]].bcd
	}
]] resolve #2 to #1

test Resolve invalid role in shortcut fails [[
	entity Student{
	}
	
	relation Enrollment{
		Student *
		Course  +
		
		student.abc Student <-> Course [[iDoNotExist]].bcd
	}
]] 1 error
